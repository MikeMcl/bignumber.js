if (typeof Test === 'undefined') require('../tester');

Test('bitwise', function () {
    var bitwiseMethods = {
      '<<': 'bitShiftLeft',
      '>>': 'bitShiftRight',
      '&': 'and'
    };

    function t(a, method, b, expected) {
        Test.areEqual(String(expected), String(new BigNumber(a)[bitwiseMethods[method]](b)));
    }
    
    BigNumber.config({
        DECIMAL_PLACES: 20,
        ROUNDING_MODE: 4,
        RANGE: 1E9,
        EXPONENTIAL_AT: [-7, 21]
    });

    t(5, '<<', 1, 10);
    t(1, '<<', 1, 2);
    t(1, '<<', 1, 2);
    t(24, '<<', 2, 96);
    t(34, '<<', 1, 68);
    t(9198, '<<', 3, 73584);
    t(76574, '<<', 4, 1225184);
    t(272103, '<<', 4, 4353648);
    t(1215931, '<<', 4, 19454896);
    t(51414990, '<<', 3, 411319920);
    t(122202596, '<<', 5, 3910483072);
    t(91835515546, '<<', 7, 11754945989888);
    t(826082662830, '<<', 5, 26434645210560);
    t(7808491337567, '<<', 11, '15991790259337216');
    t('85298261686563', '<<', 3, '682386093492504');
    t('465197505694882', '<<', 10, '476362245831559168');
    t('499853921090865', '<<', 2, '1999415684363460');
    t('71627612896198660', '<<', 7, '9168334450713428480');
    t('9808107199553692637458844627331783393189095761224043413076430750415009970712942795353', '<<', 53, '8.8343575858239778427076287597820651587718244861517740403426567276863068573219699262666741174476210176e+100')
    t('8556982381130007888012088298403380267638723554271975821909872686706052238448504329765765456364090287', '<<', 61, '1.9731058003493377590905570321744616824362073264852204078115773958953566674254358880449128123807589801599279587313844224e+118')
    t('945436429498161368512495962671604716320730723720982854655133153422264970368604776100103907567899608536', '<<', 91, '2.340787221349567086228968787746410013712723242670387406844872802374245714851351680065620294089738208766076218007703763397669552128e+129')

    t(5, '>>', 1, 2);
    t(1, '>>', 1, 0);
    t(2, '>>', 1, 1);
    t(71, '>>', 1, 35);
    t(333, '>>', 3, 41);
    t(9915, '>>', 4, 619);
    t(18737, '>>', 2, 4684);
    t(873221, '>>', 1, 436610);
    t(2725970, '>>', 7, 21296);
    t(468795058, '>>', 8, 1831230);
    t(2038501468, '>>', 6, 31851585);
    t(93551612994, '>>', 1, 46775806497);
    t(494319124632, '>>', 1, 247159562316);
    t(9556170079244, '>>', 13, 1166524667);
    t(27675004829806, '>>', 4, 1729687801862);
    t('902222986045879', '>>', 4, '56388936627867');
    t('5408647105159271', '>>', 13, '660235242329');
    t('12580029945908373', '>>', 13, '1535648186756');
    t('15505800206870995822599183428482582989694041261530771479060466', '>>', 55, '4.30372410122642374347123423685773174465597525e+44');
    t('397087667409497808986239992322110396056425804653011769737575255865753274775434010371748404659323414', '>>', 65, '1.0763082791814474028727760326952815163294255997218829179039335403222912357298479e+79');
    t('9781443547436997218457028182782378584601034149352840783512482012009099917751227733569040635315944693', '>>', 31, '4.554839594027491853785248558401306432020400720347110546898321254183119124617067972928770182e+90');

    t(0, '&', 0, 0);
    t(1, '&', 1, 1);
    t(82, '&', 272, 16);
    t(9, '&', 57, 9);
    t(46, '&', 450, 2);
    t(790, '&', 8547, 258);
    t(9289, '&', 18892, 72);
    t(31535, '&', 299609, 4617);
    t(817360, '&', 8258582, 786448);
    t(2282606, '&', 80420938, 131146);
    t(39428717, '&', 808078294, 524868);
    t(956062471, '&', 6994628468, 552078084);
    t(2125340163, '&', 19091575011, 1889669123);
    t(14102644122, '&', 378789471973, 9700480);
    t(568007210198, '&', 4921313881150, 352986134);
    t(1164908247373, '&', 50320300276641, 1117120444673);
    t('28247046904613', '&', '223419307769627', '10105054567169');
    t('169041059844462', '&', '4961022522881308', '140754937843980');
    t('77643810334199331199339463425161001351658450776934197', '&', '335737223901351803546645849118412579802363959656390734', '4.826468146613767764345182906523776078255382476200346e+52');
    t('73772979149164088040568672593298029212750372451383171110511465560', '&', '686351592451730411583226956329171412078730820613176635767547221638', '5.27670308920904336007245590071584776723060634611347209316982016e+64');
}); 
